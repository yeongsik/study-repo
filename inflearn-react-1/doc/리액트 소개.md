# React.js 소개

### 데이터와 화면을 연결하는 방법

* 화면에 출력되는 유저 인터페이스를 상태로 관리할 수 있다는 것(상태 변경으로 자동 렌더링)이 큰 특징
* 모델과 뷰를 변경했던 순수 JS와 달리 상태(모델)만 관리해도 자동 렌더링이 되게 도와준다.

```javascript
let data = "Hello world";
document.body.innerHTML = `<p>${data}</p>`;

data = "안녕";
// 데이터(상태)가 변경되면 재렌더링이 필요하다.
document.body.innerHTML = `<p>${data}</p>`;

/*
리액트나 뷰 경우 재 렌더링 할 필요 없이, 상태만 관리해도 자동 렌더링이 된다.
 */


```


### 리액티브

* 리액트의 첫번째 특성
* 특정 값에 반응해서 자동으로 반응하는 것을 '리액티브' 한 성질이라고 한다.
* 순수 JS에서는 모델 뷰 컨트롤러를 매번 수정했는데 이렇게 UI 상태를 리액티브로 관리하면 그럴 필요가 없어진다.
* 이런 형태를 View Model 이라고 한다. (VM)
* 리액트가 이런 리액티브한 특성을 갖고 있다.
* 코드가 단순해지는 효과를 갖고 있다.


```javascript

const state = {
    _data: "Hello world",

};

const render = () => document.body.innerHTML = `<p>${state.data}</p>`;

Object.defineProperty(state, "data", {
    get() {
        return state._data;
    },
    set(value) {
        state._data = value;
        render();
    },
});

render();

state.data = "안녕";
state.data = "Hello world";

/*
    상태값 변경 시 render()함수를 호출하기 때문에 상태 변경에 따른 자동 렌더링이 되고 있는 상황
 */

```

### 가상돔

* 상태 변화가 UI에 반영되려면 DOM API 호출이 불가피 하다.
* 상태 변화 할 때 마다 DOM API은 브라우저 성능에 영향을 준다.
* 브라우저가 html과 css 코드를 다운 받으면 먼저 DOM를 만든다.
  1. html 코드를 모두 파싱해서 트리형태의 DOM를 만든다.
  2. css 도 역시 cssom 이라는 트리 구조 형태를 만든다.
  3. dom , cssom를 합쳐서 렌더트리를 만든다.
  4. 렌더트리를 뷰포트에 맞게 그릴 수 있도록 레이아웃을 개선
  5. 레이아웃을 화면에 그린다.

* 자바스크립트로 돔 구조를 변경하면 다시 위의 과정을 거친다. (자주 호출하면 브라우저 렌더링 성능에 영향을 미친다.)
* 직접 DOM API를 호출하지 않고, 가상돔을 만들어서 메모리를 관리한다.
* 가상돔에 먼저 요청하고 가상돔에서 전체화면을 그리고, 이전과 현재 가상돔의 차이를 계산하고 차이나는 부분만 DOM API에 렌더링한다.
* 가상돔은 하나의 패턴, 구현하는 방식에 따라 동작하는 것이 조금 다를 수 있다.

### setState

* 컴포넌트를 항상 즉각적으로 갱신하지 않는다.
* 여러 변경 사항과 함께 일괄적 갱신하거나, 나중으로 미룰 수 있다.

