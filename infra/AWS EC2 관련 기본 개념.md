# AWS EC2 관련 기본 개념


# EC2 (Elastic Compute Cloud)
가상 서버를 만들고 관리하는 서비스, 백엔드 애플리케이션을 배포하는 기본적인 방법


# VPC (Virtual Private Cloud)
AWS 클라우드 내부에 나만의 가상 네트워크를 만드는 서비스. 네트워크 격리와 보안 때문에 필수적임

# IAM (Identity and Access Management)
사용자 및 권한 관리하는 서비스, 최소한의 권한만 부여하는 것이 좋다.

## IAM 계정 종류
- 루트 사용자
  - AWS 계정을 처음 생성할 때 만들어지는 최고 권한 계정, 모든 서비스와 리소스에 대한 접근 권한을 가짐
  - 절대적인 관리자 권한
  - 보안상 매우 중요, 일상적인 작업에 사용 X
  - MFA(다단계 인증)를 필수로 설정, 안전하게 보관해야함
  - 주로 청구 정보 관리, 계정 설정 변경 등 민감한 작업에만 사용
- IAM 사용자
  - 루트 사용자 외에 AWS 리소스에 접근하기 위해 생성하는 개별 사용자, 사람 뿐만 아니라 애플리케이션이나 서비스도 될 수 있음
  - 처음 생성 시엔 어떤 권한도 가지지 않음
  - 정책을 통해 권한 부여
  - 루트 사용자와 달리 특정 작업에 필요한 최소한의 권한(최소 권한 원칙)을 부여하여 보안 강화
  - 콘솔 로그인 비밀번호, 프로그래밍 방식 접근을 위한 액세스 키를 가질 수 있다.
- IAM 정책
  - 권한을 정의하는 JSON 형태의 문서
  - 누가(Principle), 어떤 리소스(Resource)에 대해 어떤 작업(Action)을 허용(Allow)하거나 거부(Deny)할지 명시
  - 정책은 사용자,그룹,역할에 연결하여 권한 부여
  - AWS에 미리 정의한 관리형 정책과 사용자가 직접 생성하는 고객관리형 정책이 있다.
    - EX) S3 버킷에 대한 읽기 전용 권한 정책
      ```json
      {
        "Version": "2012-10-17",
        "Statement": [
          {
            "Effect": "Allow",
            "Action": [
              "s3:GetObject"
            ],
            "Resource": "arn:aws:s3:::my-example-bucket/*"  
          },
         {
            "Effect": "Allow",
            "Action": [
              "s3:ListBucket"
            ],
            "Resource": "arn:aws:s3:::my-example-bucket"
          }
        ] 
      }
      ```
      - Version: 정책 언어 버전 
      - Statement : 실제 권한 부여 내용을 담고 있는 배열, 여러 개의 권한 정의 가능
      - Effect : 권한의 효과를 정의 Allow 허용, Deny 거부
      - Action : 허용하거나 거부할 AWS 서비스의 API 작업을 지정, 여기서는 S3의 GetObject와 ListBucket 작업을 허용
      - Resource : 권한이 적용될 AWS 리소스 지정. ARN(Amazon Resource Name)형식으로 표기
      
- IAM 그룹
  - 여러 IAM 사용자를 묶어서 관리하는 단위
  - 그룹에 정책을 연결하면, 그 그룹에 속한 모든 사용자에게 해당 정책의 권한이 자동 부여
- IAM 역할
  - 사용자나 AWS 서비스에게 임시 자격 증명을 부여하여 특정 작업을 수행할 수 있도록 함
  - 사용자에게 직접 연결 대신, 임시 권한 필요한 경우 사용
  - EX) EC2 인스턴스가 S3버킷에 접근해야할 때, 인스턴스에 S3 접근 권한이 있는 역할을 부여하여 액세스 키를 인스턴스에 저장할 필요 없이 안전하게 권한 제공



